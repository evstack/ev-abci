# Evolve Network Module (beta)

> Experimental attester networking module. Beta quality, simplified for validating the single-attester flow — expect rapid iteration and breaking changes.

This Cosmos SDK module prototypes the Evolve attester workflow. It keeps lightweight state about the attester set, tracks attestations per block, and emits checkpoint events so downstream components can reason about soft confirmations. The implementation is intentionally narrow: it only supports one active attester and omits many safety checks required for production.

## Responsibilities
- Register gRPC and message servers that expose three transactions: `MsgJoinAttesterSet`, `MsgLeaveAttesterSet`, and `MsgAttest`.
- Maintain attester membership (`keeper.SetAttesterSetMember`) and the index map used to build bitmaps (`keeper.BuildValidatorIndexMap`).
- Store per-height attestation bitmaps and raw signatures, deriving quorum and soft-confirmation status in `Keeper.EndBlocker`.
- Track epoch participation bitmaps and prune/eject placeholders for future validator governance.
- Surface query and genesis helpers so the attester CLI can discover participation state.

## Workflow Overview
1. An operator submits `MsgJoinAttesterSet`. The module stores the attester’s consensus public key and adds the address to the attester key set.
2. For each block of interest, the attester submits `MsgAttest` containing a signed vote payload. The keeper records the signature, flips the appropriate bit in the attestation bitmap, and updates voted power.
3. The end blocker evaluates quorum. When the single attester’s vote is present, the block is marked “soft confirmed” and a `checkpoint` event is emitted with validator and commit hashes.
4. Epoch accounting updates participation bitmaps and rebuilds the index map so subsequent votes use consistent positions.

## Current Limitations
- Only one attester is supported end-to-end. Additional attesters will collide in the bitmap logic; multi-attester support is planned but not yet implemented.
- Vote signatures are stored but not verified. Payload parsing and signature checks will land in a later milestone.
- Ejection, pruning, and alternate sign modes are placeholders to keep the prototype minimal.
- Parameter defaults (epoch length = 1, checkpoint-only sign mode) are tuned for local testing rather than production networks.

## Genesis & Queries
- `InitGenesis` seeds module parameters, the attester set, and any persisted bitmaps. If a height is flagged as soft-confirmed, it is re-emitted during init.
- `ExportGenesis` walks the collections-backed store and exports the same structs for chain state syncing.
- The autogenerated gRPC query service wraps keeper helpers so tooling can inspect attesters, bitmaps, and params.

Feedback is welcome. Treat this module as beta software meant to validate the single-attester design, and expect functionality to evolve quickly.
